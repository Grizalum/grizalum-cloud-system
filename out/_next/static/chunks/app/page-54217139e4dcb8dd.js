(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4590:function(e,t,a){Promise.resolve().then(a.bind(a,3567))},3567:function(e,t,a){"use strict";a.r(t);var s=a(7437),r=a(2265),l=a(5253),n=a(4909),o=a(6573),i=a(4235),d=a(39),c=a(6812),x=a(1346),m=a(7703),h=a(8485),u=a(6612),g=a(3423),p=a(1298),b=a(5790),j=a(6141),y=a(5750),f=a(9312),N=a(1827),v=a(6245),w=a(2549),C=a(4136),S=a(7480),D=a(1738),P=a(8004);t.default=()=>{let[e,t]=(0,r.useState)("dashboard"),[a,k]=(0,r.useState)(!0),[A,z]=(0,r.useState)(""),[E,B]=(0,r.useState)("all"),[I,L]=(0,r.useState)(null),[T,M]=(0,r.useState)({}),[R,Z]=(0,r.useState)("synced"),[O,G]=(0,r.useState)(new Date),[F,U]=(0,r.useState)([]),[_,W]=(0,r.useState)([]),[q,H]=(0,r.useState)({borrowerId:null,amount:"",date:new Date().toISOString().split("T")[0],isCustomAmount:!1}),[K,J]=(0,r.useState)(!1),[V,$]=(0,r.useState)({name:"",loanAmount:"",phone:"",email:""}),shareData=()=>{try{if(0===F.length){alert("❌ No hay datos para compartir\n\nPrimero agrega al menos un prestatario.");return}let e={borrowers:F,payments:_,timestamp:new Date().toISOString(),version:"2.0"},t=btoa(JSON.stringify(e)),a=window.location.origin+window.location.pathname+"?data="+t;window.history.replaceState({},"",a),navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(a).then(()=>{alert("\uD83D\uDCCB \xa1Link copiado exitosamente!\n\n\uD83D\uDCCA DATOS INCLUIDOS:\n• "+F.length+" prestatarios\n• "+_.length+" pagos\n• Informaci\xf3n completa actualizada\n\n✅ P\xe9galo en WhatsApp, Telegram o cualquier chat\n\uD83D\uDCF1 Funciona en PC y m\xf3vil")}).catch(()=>{prompt("\uD83D\uDD17 COPIA ESTE LINK:\n\nContiene "+F.length+" prestatarios y "+_.length+" pagos:\n\n",a)}):prompt("\uD83D\uDD17 COPIA ESTE LINK:\n\nContiene "+F.length+" prestatarios y "+_.length+" pagos:\n\n",a)}catch(e){console.error("Error al compartir:",e),alert("❌ Error al compartir. Intenta de nuevo.")}},syncWithCloud=()=>{try{Z("syncing"),setTimeout(()=>{Z("synced"),G(new Date),alert("☁️ \xa1Datos sincronizados con la nube!\n\nTus datos est\xe1n ahora disponibles desde cualquier dispositivo.")},2e3)}catch(e){alert("❌ Error al sincronizar"),Z("error")}},downloadBackup=()=>{try{let e={borrowers:F,payments:_,exportDate:new Date().toISOString(),source:"GRIZALUM Cloud System",version:"2.0"},t=JSON.stringify(e,null,2),a=new Blob([t],{type:"application/json"}),s=URL.createObjectURL(a),r=document.createElement("a");r.href=s,r.download="GRIZALUM_"+new Date().toISOString().split("T")[0]+".json",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s),alert("✅ Respaldo descargado en tu computadora!\n\n\uD83D\uDCC1 Archivo descargado con todos tus datos.\n\uD83D\uDCBE Gu\xe1rdalo en lugar seguro.")}catch(e){alert("❌ Error al descargar respaldo")}},loadFromStorage=()=>{try{let e=new URLSearchParams(window.location.search),t=e.get("data");if(t)try{let e=JSON.parse(atob(t));if(e.borrowers&&Array.isArray(e.borrowers)){U(e.borrowers),W(e.payments||[]),Z("synced");return}}catch(e){console.error("Error al decodificar datos de URL")}let a=localStorage.getItem("grizalum_data_backup");if(a)try{let e=JSON.parse(a);if(e.borrowers&&e.borrowers.length>0){U(e.borrowers),W(e.payments||[]),Z("synced");return}}catch(e){console.error("Error al parsear datos guardados")}U([{id:1,name:"Mar\xeda Gonz\xe1lez",loanAmount:2e4,interestRate:18,loanTerm:18,monthlyPayment:1278.52,totalToPay:23013.36,currentBalance:20500,paymentsMade:3,status:"En Progreso",phone:"+51 999 555 123",email:"maria@email.com"}]),Z("synced")}catch(e){console.error("Error al cargar datos"),Z("error")}},saveToStorage=(e,t)=>{try{let a={borrowers:e,payments:t,timestamp:new Date().toISOString(),version:"2.0"};return localStorage.setItem("grizalum_data_backup",JSON.stringify(a)),localStorage.setItem("grizalum_last_save",new Date().toISOString()),!0}catch(e){return console.error("Error al guardar"),!1}};(0,r.useEffect)(()=>{loadFromStorage()},[]),(0,r.useEffect)(()=>{F.length>0&&saveToStorage(F,_)},[F,_]);let handleAddBorrower=()=>{if(!V.name||!V.loanAmount){alert("Por favor completa el nombre y monto");return}let e=parseFloat(V.loanAmount),t=1.18*e/18,a=18*t,s={id:Date.now(),name:V.name,loanAmount:e,interestRate:18,loanTerm:18,monthlyPayment:Math.round(100*t)/100,totalToPay:Math.round(100*a)/100,currentBalance:Math.round(100*a)/100,paymentsMade:0,status:"Pendiente",phone:V.phone||"",email:V.email||""};U([...F,s]),$({name:"",loanAmount:"",phone:"",email:""}),J(!1),alert("✅ Prestatario agregado correctamente")},handlePayment=()=>{let e=F.find(e=>e.id===q.borrowerId),t=parseFloat(q.amount);if(!e||!t||t<=0){alert("Por favor selecciona un prestatario y monto v\xe1lido");return}if(t>e.currentBalance){alert("El monto no puede ser mayor al saldo pendiente");return}let a=e.currentBalance-t;U(F.map(e=>e.id===q.borrowerId?{...e,currentBalance:Math.round(100*a)/100,paymentsMade:e.paymentsMade+1,status:a<=.01?"Pagado":"En Progreso"}:e));let s={id:Date.now(),borrowerId:q.borrowerId,borrowerName:e.name,amount:t,date:q.date,time:new Date().toLocaleTimeString("es-PE",{hour12:!0}),remainingBalance:Math.round(100*a)/100,isEdited:q.isCustomAmount};W([..._,s]),H({borrowerId:null,amount:"",date:new Date().toISOString().split("T")[0],isCustomAmount:!1}),alert("✅ Pago registrado correctamente")},handleBorrowerSelect=e=>{let t=F.find(t=>t.id===e);H({...q,borrowerId:e,amount:t?t.monthlyPayment.toString():"",isCustomAmount:!1})},startEditBorrower=e=>{L(e.id),M({name:e.name,phone:e.phone,email:e.email,loanTerm:e.loanTerm,interestRate:e.interestRate,loanAmount:e.loanAmount,currentBalance:e.currentBalance,paymentsMade:e.paymentsMade})},saveEditBorrower=()=>{let e=parseFloat(T.loanAmount),t=e*(1+T.interestRate/100)/T.loanTerm,a=t*T.loanTerm,s=parseInt(T.paymentsMade),r=parseFloat(T.currentBalance),l="Pendiente";s>0&&r>0?l="En Progreso":r<=0&&(l="Pagado"),U(F.map(n=>n.id===I?{...n,name:T.name,phone:T.phone,email:T.email,loanTerm:parseInt(T.loanTerm),interestRate:parseFloat(T.interestRate),loanAmount:e,monthlyPayment:Math.round(100*t)/100,totalToPay:Math.round(100*a)/100,currentBalance:r,paymentsMade:s,status:l}:n)),L(null),M({}),alert("✅ Prestatario actualizado")},Q=F.reduce((e,t)=>e+t.loanAmount,0),X=F.reduce((e,t)=>e+t.totalToPay,0),Y=F.reduce((e,t)=>e+t.currentBalance,0),ee=X-Y,et=F.filter(e=>{let t=e.name.toLowerCase().includes(A.toLowerCase()),a="all"===E||e.status===E;return t&&a}),ea=F.map(e=>({name:e.name.split(" ")[0],progreso:(e.totalToPay-e.currentBalance)/e.totalToPay*100||0})),es=[{name:"Pagado",value:F.filter(e=>"Pagado"===e.status).length},{name:"En Progreso",value:F.filter(e=>"En Progreso"===e.status).length},{name:"Pendiente",value:F.filter(e=>"Pendiente"===e.status).length}],er=["#10B981","#3B82F6","#EF4444"],GrizalumLogo=e=>{let{size:t="200"}=e;return(0,s.jsx)("div",{className:"flex items-center justify-center",style:{opacity:.05},children:(0,s.jsxs)("svg",{width:t,height:t,viewBox:"0 0 400 400",children:[(0,s.jsx)("circle",{cx:"200",cy:"200",r:"150",fill:"none",stroke:"#ff4500",strokeWidth:"8"}),(0,s.jsxs)("g",{transform:"translate(200, 200)",children:[(0,s.jsx)("circle",{cx:"0",cy:"-60",r:"20",fill:"#333"}),(0,s.jsx)("rect",{x:"-20",y:"-40",width:"40",height:"50",rx:"5",fill:"#333"}),(0,s.jsx)("line",{x1:"-20",y1:"-20",x2:"-60",y2:"0",stroke:"#333",strokeWidth:"8"}),(0,s.jsx)("line",{x1:"20",y1:"-20",x2:"60",y2:"0",stroke:"#333",strokeWidth:"8"}),(0,s.jsx)("circle",{cx:"-70",cy:"5",r:"10",fill:"#ff4500"}),(0,s.jsx)("line",{x1:"-15",y1:"10",x2:"-15",y2:"50",stroke:"#333",strokeWidth:"8"}),(0,s.jsx)("line",{x1:"15",y1:"10",x2:"15",y2:"50",stroke:"#333",strokeWidth:"8"}),(0,s.jsx)("line",{x1:"-100",y1:"60",x2:"100",y2:"60",stroke:"#333",strokeWidth:"4"})]}),(0,s.jsx)("text",{x:"200",y:"320",textAnchor:"middle",fill:"#333",fontSize:"24",fontWeight:"bold",children:"GRIZALUM"}),(0,s.jsx)("text",{x:"200",y:"345",textAnchor:"middle",fill:"#666",fontSize:"12",children:"COMPA\xd1\xcdA METAL\xdaRGICA"})]})})},StatusBadge=e=>{let{status:t}=e,a={Pagado:{bg:"bg-green-100",text:"text-green-800",icon:"✓"},"En Progreso":{bg:"bg-blue-100",text:"text-blue-800",icon:"⏳"},Pendiente:{bg:"bg-red-100",text:"text-red-800",icon:"⚠️"}},r=a[t]||a.Pendiente;return(0,s.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold "+r.bg+" "+r.text,children:[r.icon," ",t]})},ConnectionStatus=()=>{let[e,t]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{t(!0)},[]),!e)return null;let a="syncing"===R?{color:"text-blue-500",icon:"animate-pulse",text:"Sincronizando..."}:"synced"===R?{color:"text-green-500",icon:"",text:"☁️ Sincronizado "+new Date().toLocaleTimeString()}:{color:"text-red-500",icon:"",text:"Error de conexi\xf3n"};return(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-xs",children:[(0,s.jsx)(g.Z,{className:"h-4 w-4 "+a.color+" "+a.icon}),(0,s.jsx)("span",{className:a.color,children:a.text}),"synced"===R&&(0,s.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-bold",children:"✅ NUBE ACTIVA"})]})},History=()=>(0,s.jsxs)("div",{className:"space-y-6 relative",children:[(0,s.jsx)("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none z-0",children:(0,s.jsx)(GrizalumLogo,{size:"600"})}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-gray-800",children:"Historial de Pagos"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Registro completo de transacciones"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(ConnectionStatus,{})})]}),(0,s.jsx)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl p-6",children:0===_.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCCB"}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-500",children:"No hay pagos registrados"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Los pagos aparecer\xe1n aqu\xed cuando los registres"})]}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Fecha"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Prestatario"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Monto"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Saldo Restante"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Hora"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Tipo"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:_.slice().reverse().map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("td",{className:"px-4 py-4 font-medium text-gray-900",children:new Date(e.date).toLocaleDateString("es-PE")}),(0,s.jsx)("td",{className:"px-4 py-4 text-gray-900",children:e.borrowerName}),(0,s.jsxs)("td",{className:"px-4 py-4 font-bold text-green-600",children:["S/ ",e.amount.toLocaleString()]}),(0,s.jsxs)("td",{className:"px-4 py-4 font-semibold text-red-600",children:["S/ ",e.remainingBalance.toLocaleString()]}),(0,s.jsx)("td",{className:"px-4 py-4 text-gray-500 text-sm",children:e.time}),(0,s.jsx)("td",{className:"px-4 py-4",children:e.isEdited?(0,s.jsx)("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-bold",children:"\uD83D\uDD27 Personalizado"}):(0,s.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-bold",children:"✓ Cuota Normal"})})]},e.id))})]})})})]})]});return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-red-100",children:[(0,s.jsx)(()=>(0,s.jsxs)("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-gradient-to-b from-orange-600 to-red-800 text-white transform transition-transform duration-300 ease-in-out "+(a?"translate-x-0":"-translate-x-full")+" lg:translate-x-0 lg:static lg:inset-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-orange-700",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-orange-600 font-bold text-xl",children:"G"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-bold",children:"GRIZALUM"}),(0,s.jsx)("p",{className:"text-xs text-orange-200",children:"Cloud System"})]})]}),(0,s.jsx)("button",{onClick:()=>k(!1),className:"lg:hidden text-white hover:bg-orange-700 p-2 rounded-lg",children:(0,s.jsx)(w.Z,{size:20})})]}),(0,s.jsxs)("nav",{className:"mt-6",children:[(0,s.jsx)("div",{className:"px-6 mb-4",children:(0,s.jsx)("h3",{className:"text-xs font-semibold text-orange-200 uppercase tracking-wider",children:"Men\xfa Principal"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("button",{onClick:()=>{t("dashboard"),k(!1)},className:"w-full flex items-center px-6 py-3 text-left transition-all "+("dashboard"===e?"bg-white bg-opacity-20 border-r-4 border-white":"hover:bg-white hover:bg-opacity-10"),children:[(0,s.jsx)(S.Z,{className:"mr-3",size:20}),"Dashboard"]}),(0,s.jsxs)("button",{onClick:()=>{t("borrowers"),k(!1)},className:"w-full flex items-center px-6 py-3 text-left transition-all "+("borrowers"===e?"bg-white bg-opacity-20 border-r-4 border-white":"hover:bg-white hover:bg-opacity-10"),children:[(0,s.jsx)(y.Z,{className:"mr-3",size:20}),"Prestatarios"]}),(0,s.jsxs)("button",{onClick:()=>{t("payments"),k(!1)},className:"w-full flex items-center px-6 py-3 text-left transition-all "+("payments"===e?"bg-white bg-opacity-20 border-r-4 border-white":"hover:bg-white hover:bg-opacity-10"),children:[(0,s.jsx)(D.Z,{className:"mr-3",size:20}),"Registrar Pago"]}),(0,s.jsxs)("button",{onClick:()=>{t("history"),k(!1)},className:"w-full flex items-center px-6 py-3 text-left transition-all "+("history"===e?"bg-white bg-opacity-20 border-r-4 border-white":"hover:bg-white hover:bg-opacity-10"),children:[(0,s.jsx)(History,{className:"mr-3",size:20}),"Historial"]})]})]}),(0,s.jsx)("div",{className:"px-6 mt-8",children:(0,s.jsxs)("div",{className:"bg-white bg-opacity-10 rounded-xl p-4",children:[(0,s.jsx)("h4",{className:"font-semibold mb-2",children:"\uD83D\uDCA1 Tip del d\xeda"}),(0,s.jsx)("p",{className:"text-sm text-orange-100",children:"Los datos se guardan autom\xe1ticamente. \xa1Comparte el link para acceder desde cualquier dispositivo!"})]})})]}),{}),(0,s.jsxs)("div",{className:"lg:ml-64",children:[(0,s.jsx)("div",{className:"lg:hidden bg-white shadow-sm p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("button",{onClick:()=>k(!0),className:"text-gray-600 hover:text-gray-900",children:(0,s.jsx)(P.Z,{size:24})}),(0,s.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:"GRIZALUM Cloud"}),(0,s.jsx)("div",{className:"w-6"})]})}),(0,s.jsxs)("div",{className:"p-6",children:["dashboard"===e&&(0,s.jsx)(()=>(0,s.jsxs)("div",{className:"space-y-8 relative",children:[(0,s.jsx)("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none z-0",children:(0,s.jsx)(GrizalumLogo,{size:"600"})}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Dashboard - GRIZALUM Cloud ☁️"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Sistema de Gesti\xf3n de Pr\xe9stamos en la Nube - Accesible desde cualquier dispositivo"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(ConnectionStatus,{})})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{onClick:shareData,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center transition-all",children:"\uD83D\uDD17 Compartir"}),(0,s.jsx)("button",{onClick:syncWithCloud,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center transition-all",children:"☁️ Subir a Nube"}),(0,s.jsx)("button",{onClick:downloadBackup,className:"bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg flex items-center transition-all",children:"\uD83D\uDCBE Descargar"})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,s.jsx)("div",{className:"bg-gradient-to-br from-orange-600 to-red-800 text-white p-6 rounded-2xl shadow-xl",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-orange-100 text-sm font-medium",children:"Capital Prestado"}),(0,s.jsxs)("p",{className:"text-3xl font-bold mt-2",children:["S/ ",Q.toLocaleString()]})]}),(0,s.jsx)(p.Z,{className:"h-12 w-12 text-orange-200"})]})}),(0,s.jsx)("div",{className:"bg-gradient-to-br from-green-600 to-green-800 text-white p-6 rounded-2xl shadow-xl",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-green-100 text-sm font-medium",children:"Total Cobrado"}),(0,s.jsxs)("p",{className:"text-3xl font-bold mt-2",children:["S/ ",ee.toLocaleString()]})]}),(0,s.jsx)(b.Z,{className:"h-12 w-12 text-green-200"})]})}),(0,s.jsx)("div",{className:"bg-gradient-to-br from-blue-600 to-blue-800 text-white p-6 rounded-2xl shadow-xl",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-blue-100 text-sm font-medium",children:"Pendiente"}),(0,s.jsxs)("p",{className:"text-3xl font-bold mt-2",children:["S/ ",Y.toLocaleString()]})]}),(0,s.jsx)(j.Z,{className:"h-12 w-12 text-blue-200"})]})}),(0,s.jsx)("div",{className:"bg-gradient-to-br from-purple-600 to-purple-800 text-white p-6 rounded-2xl shadow-xl",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-purple-100 text-sm font-medium",children:"Prestatarios"}),(0,s.jsx)("p",{className:"text-3xl font-bold mt-2",children:F.length})]}),(0,s.jsx)(y.Z,{className:"h-12 w-12 text-purple-200"})]})})]}),F.length>0&&(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:"Progreso por Prestatario"}),(0,s.jsx)(l.h,{width:"100%",height:300,children:(0,s.jsxs)(n.v,{data:ea,children:[(0,s.jsx)(o.q,{strokeDasharray:"3 3"}),(0,s.jsx)(i.K,{dataKey:"name"}),(0,s.jsx)(d.B,{domain:[0,100]}),(0,s.jsx)(c.u,{formatter:e=>e.toFixed(1)+"%"}),(0,s.jsx)(x.$,{dataKey:"progreso",fill:"#ff4500",radius:[4,4,0,0]})]})})]}),(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:"Estados de Pr\xe9stamos"}),(0,s.jsx)(l.h,{width:"100%",height:300,children:(0,s.jsxs)(m.u,{children:[(0,s.jsx)(h.b,{data:es,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,dataKey:"value",children:es.map((e,t)=>(0,s.jsx)(u.b,{fill:er[t]},t))}),(0,s.jsx)(c.u,{})]})})]})]}),0===F.length&&(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl p-12 text-center",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"☁️"}),(0,s.jsx)("h3",{className:"text-2xl font-bold text-gray-600 mb-2",children:"\xa1GRIZALUM Cloud - Sistema en la Nube!"}),(0,s.jsxs)("p",{className:"text-gray-500 mb-6",children:["☁️ Tus datos se guardan autom\xe1ticamente en la nube y est\xe1n disponibles desde cualquier dispositivo.",(0,s.jsx)("br",{}),"\uD83D\uDCF1 Accede desde tu PC, tablet o m\xf3vil con el mismo link."]}),(0,s.jsxs)("button",{onClick:()=>J(!0),className:"bg-gradient-to-r from-orange-600 to-red-700 text-white px-8 py-3 rounded-xl hover:from-orange-700 hover:to-red-800 transition-all font-bold",children:[(0,s.jsx)(f.Z,{className:"inline mr-2",size:20}),"Agregar Primer Prestatario"]})]})]})]}),{}),"borrowers"===e&&(0,s.jsx)(()=>(0,s.jsxs)("div",{className:"space-y-6 relative",children:[(0,s.jsx)("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none z-0",children:(0,s.jsx)(GrizalumLogo,{size:"600"})}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-gray-800",children:"Prestatarios"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Gestiona tu cartera de clientes"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(ConnectionStatus,{})})]}),(0,s.jsxs)("button",{onClick:()=>J(!0),className:"bg-gradient-to-r from-orange-600 to-red-700 text-white px-6 py-3 rounded-xl hover:from-orange-700 hover:to-red-800 transition-all flex items-center shadow-lg",children:[(0,s.jsx)(f.Z,{className:"mr-2",size:20}),"Nuevo"]})]}),(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl p-6",children:[(0,s.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(N.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,s.jsx)("input",{type:"text",placeholder:"Buscar...",value:A,onChange:e=>z(e.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-500 transition-all"})]}),(0,s.jsxs)("select",{value:E,onChange:e=>B(e.target.value),className:"px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-500 transition-all",children:[(0,s.jsx)("option",{value:"all",children:"Todos"}),(0,s.jsx)("option",{value:"Pendiente",children:"Pendiente"}),(0,s.jsx)("option",{value:"En Progreso",children:"En Progreso"}),(0,s.jsx)("option",{value:"Pagado",children:"Pagado"})]})]}),0===et.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDC65"}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-500",children:"No hay prestatarios"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Agrega tu primer prestatario para comenzar"})]}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Prestatario"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Capital"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Cuota"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Saldo"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Progreso"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Estado"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Acciones"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:et.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("td",{className:"px-4 py-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-bold text-gray-900",children:e.name}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[e.phone&&"\uD83D\uDCF1 "+e.phone,e.email&&" | \uD83D\uDCE7 "+e.email]})]})}),(0,s.jsxs)("td",{className:"px-4 py-4 font-semibold text-gray-900",children:["S/ ",e.loanAmount.toLocaleString()]}),(0,s.jsxs)("td",{className:"px-4 py-4 font-semibold text-blue-600",children:["S/ ",e.monthlyPayment.toLocaleString()]}),(0,s.jsxs)("td",{className:"px-4 py-4 font-semibold text-red-600",children:["S/ ",e.currentBalance.toLocaleString()]}),(0,s.jsx)("td",{className:"px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"bg-gray-200 rounded-full h-2 w-16 mr-2",children:(0,s.jsx)("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:e.paymentsMade/e.loanTerm*100+"%"}})}),(0,s.jsxs)("span",{className:"text-xs text-gray-600",children:[e.paymentsMade,"/",e.loanTerm]})]})}),(0,s.jsx)("td",{className:"px-4 py-4",children:(0,s.jsx)(StatusBadge,{status:e.status})}),(0,s.jsx)("td",{className:"px-4 py-4",children:(0,s.jsx)("div",{className:"flex space-x-2",children:I===e.id?(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:saveEditBorrower,className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded-lg transition-all",children:(0,s.jsx)(v.Z,{size:16})}),(0,s.jsx)("button",{onClick:()=>L(null),className:"bg-gray-600 hover:bg-gray-700 text-white p-2 rounded-lg transition-all",children:(0,s.jsx)(w.Z,{size:16})})]}):(0,s.jsx)("button",{onClick:()=>startEditBorrower(e),className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-all",children:(0,s.jsx)(C.Z,{size:16})})})})]},e.id))})]})})]}),I&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Editar Prestatario"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"Nombre",value:T.name||"",onChange:e=>M({...T,name:e.target.value}),className:"w-full p-3 border rounded-lg"}),(0,s.jsx)("input",{type:"text",placeholder:"Tel\xe9fono",value:T.phone||"",onChange:e=>M({...T,phone:e.target.value}),className:"w-full p-3 border rounded-lg"}),(0,s.jsx)("input",{type:"email",placeholder:"Email",value:T.email||"",onChange:e=>M({...T,email:e.target.value}),className:"w-full p-3 border rounded-lg"}),(0,s.jsx)("input",{type:"number",placeholder:"Monto del pr\xe9stamo",value:T.loanAmount||"",onChange:e=>M({...T,loanAmount:parseFloat(e.target.value)||0}),className:"w-full p-3 border rounded-lg"}),(0,s.jsx)("input",{type:"number",placeholder:"Saldo actual",value:T.currentBalance||"",onChange:e=>M({...T,currentBalance:parseFloat(e.target.value)||0}),className:"w-full p-3 border rounded-lg"}),(0,s.jsx)("input",{type:"number",placeholder:"Pagos realizados",value:T.paymentsMade||"",onChange:e=>M({...T,paymentsMade:parseInt(e.target.value)||0}),className:"w-full p-3 border rounded-lg"})]}),(0,s.jsxs)("div",{className:"flex space-x-4 mt-6",children:[(0,s.jsx)("button",{onClick:saveEditBorrower,className:"flex-1 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-all",children:"Guardar"}),(0,s.jsx)("button",{onClick:()=>L(null),className:"flex-1 bg-gray-600 text-white py-3 rounded-lg hover:bg-gray-700 transition-all",children:"Cancelar"})]})]})}),K&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Nuevo Prestatario"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"Nombre completo *",value:V.name,onChange:e=>$({...V,name:e.target.value}),className:"w-full p-3 border rounded-lg"}),(0,s.jsx)("input",{type:"number",placeholder:"Monto del pr\xe9stamo *",value:V.loanAmount,onChange:e=>$({...V,loanAmount:e.target.value}),className:"w-full p-3 border rounded-lg"}),(0,s.jsx)("input",{type:"text",placeholder:"Tel\xe9fono",value:V.phone,onChange:e=>$({...V,phone:e.target.value}),className:"w-full p-3 border rounded-lg"}),(0,s.jsx)("input",{type:"email",placeholder:"Email",value:V.email,onChange:e=>$({...V,email:e.target.value}),className:"w-full p-3 border rounded-lg"}),(0,s.jsx)("div",{className:"bg-orange-50 p-3 rounded-lg",children:(0,s.jsxs)("p",{className:"text-sm text-orange-700",children:[(0,s.jsx)("strong",{children:"Condiciones por defecto:"}),(0,s.jsx)("br",{}),"• Tasa de inter\xe9s: 18% anual",(0,s.jsx)("br",{}),"• Plazo: 18 meses",(0,s.jsx)("br",{}),"• Se puede editar despu\xe9s"]})})]}),(0,s.jsxs)("div",{className:"flex space-x-4 mt-6",children:[(0,s.jsx)("button",{onClick:handleAddBorrower,className:"flex-1 bg-orange-600 text-white py-3 rounded-lg hover:bg-orange-700 transition-all",children:"Agregar"}),(0,s.jsx)("button",{onClick:()=>J(!1),className:"flex-1 bg-gray-600 text-white py-3 rounded-lg hover:bg-gray-700 transition-all",children:"Cancelar"})]})]})})]})]}),{}),"payments"===e&&(0,s.jsx)(()=>(0,s.jsxs)("div",{className:"space-y-6 relative",children:[(0,s.jsx)("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none z-0",children:(0,s.jsx)(GrizalumLogo,{size:"600"})}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-gray-800",children:"Registrar Pago"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Procesa los pagos de tus prestatarios"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(ConnectionStatus,{})})]}),(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-6 text-gray-800",children:"Nuevo Pago"}),0===F.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCB3"}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-500",children:"No hay prestatarios"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Primero agrega un prestatario para registrar pagos"})]}):(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsxs)("select",{value:q.borrowerId||"",onChange:e=>handleBorrowerSelect(parseInt(e.target.value)),className:"p-3 border-2 border-gray-200 rounded-xl focus:border-orange-500 transition-all",children:[(0,s.jsx)("option",{value:"",children:"Seleccionar prestatario"}),F.filter(e=>"Pagado"!==e.status).map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," - S/ ",e.currentBalance.toLocaleString()]},e.id))]}),(0,s.jsx)("input",{type:"number",placeholder:"Monto",value:q.amount,onChange:e=>H({...q,amount:e.target.value,isCustomAmount:!0}),className:"p-3 border-2 border-gray-200 rounded-xl focus:border-orange-500 transition-all"}),(0,s.jsx)("input",{type:"date",value:q.date,onChange:e=>H({...q,date:e.target.value}),className:"p-3 border-2 border-gray-200 rounded-xl focus:border-orange-500 transition-all"}),(0,s.jsx)("button",{onClick:handlePayment,disabled:!q.borrowerId||!q.amount,className:"bg-gradient-to-r from-green-600 to-green-700 text-white py-3 px-6 rounded-xl hover:from-green-700 hover:to-green-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed font-bold",children:"\uD83D\uDCB0 Registrar Pago"})]}),q.borrowerId&&(0,s.jsx)("div",{className:"mt-6 p-4 bg-blue-50 rounded-xl",children:(()=>{let e=F.find(e=>e.id===q.borrowerId);return e?(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold text-blue-700",children:"Cuota mensual:"}),(0,s.jsxs)("div",{className:"text-lg font-bold text-blue-800",children:["S/ ",e.monthlyPayment.toLocaleString()]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold text-blue-700",children:"Saldo actual:"}),(0,s.jsxs)("div",{className:"text-lg font-bold text-red-600",children:["S/ ",e.currentBalance.toLocaleString()]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold text-blue-700",children:"Progreso:"}),(0,s.jsxs)("div",{className:"text-lg font-bold text-green-600",children:[e.paymentsMade,"/",e.loanTerm," meses"]})]})]}):null})()})]})]})]}),{}),"history"===e&&(0,s.jsx)(History,{})]})]}),a&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>k(!1)})]})}}},function(e){e.O(0,[800,971,472,744],function(){return e(e.s=4590)}),_N_E=e.O()}]);